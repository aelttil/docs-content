"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["7510"],{338:function(e,n,s){s.r(n),s.d(n,{metadata:()=>i,contentTitle:()=>o,default:()=>u,assets:()=>l,toc:()=>c,frontMatter:()=>a});var i=JSON.parse('{"id":"console/howto","title":"Prise en main \xe9tape par \xe9tape de la console Shiva","description":"La qualification SecNumCloud de l\'ANSSI impose une signature contractuelle entre le commanditaire (la personne qui signe le contrat de votre c\xf4t\xe9) et Cloud Temple.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/console/howto.md","sourceDirName":"console","slug":"/console/howto","permalink":"/en/docs/console/howto","draft":false,"unlisted":false,"editUrl":"https://github.com/aelttil/docs-content/docs/console/howto.md","tags":[],"version":"current","frontMatter":{"title":"Prise en main \xe9tape par \xe9tape de la console Shiva"},"sidebar":"docSidebar","previous":{"title":"Pr\xe9sentation de la console","permalink":"/en/docs/console/"},"next":{"title":"Exemple de f\xe9d\xe9ration d\'identit\xe9 avec Microsoft EntraID","permalink":"/en/docs/console/iam/sso_aad"}}'),r=s("5893"),t=s("65");let a={title:"Prise en main \xe9tape par \xe9tape de la console Shiva"},o=void 0,l={},c=[{value:"Etape 1 : Inviter un utilisateur dans votre Organisation",id:"etape-1--inviter-un-utilisateur-dans-votre-organisation",level:2},{value:"Etape 2 : G\xe9rer les droits d&#39;un utilisateur",id:"etape-2--g\xe9rer-les-droits-dun-utilisateur",level:2},{value:"Etape 4 : Mettre en \u0153uvre une f\xe9d\xe9ration d&#39;identit\xe9",id:"etape-4--mettre-en-\u0153uvre-une-f\xe9d\xe9ration-didentit\xe9",level:2},{value:"Exemple 1 : Configurer un fournisseur <strong>Microsoft ADFS</strong> (Active Directory Federation Services)",id:"exemple-1--configurer-un-fournisseur-microsoft-adfs-active-directory-federation-services",level:3},{value:"Exemple 2 : Configurer un fournisseur <strong>Microsoft EntraID</strong> (Azure Active Directory)",id:"exemple-2--configurer-un-fournisseur-microsoft-entraid-azure-active-directory",level:3},{value:"Etape 4 : Utiliser un second facteur d&#39;authentification (2FA)",id:"etape-4--utiliser-un-second-facteur-dauthentification-2fa",level:2},{value:"Etape 5 : Cr\xe9er et g\xe9rer les cl\xe9s API",id:"etape-5--cr\xe9er-et-g\xe9rer-les-cl\xe9s-api",level:2},{value:"Etape 6 : Commander des ressources compl\xe9mentaires via l&#39;interface web",id:"etape-6--commander-des-ressources-compl\xe9mentaires-via-linterface-web",level:2},{value:"Commander des hyperviseurs suppl\xe9mentaires",id:"commander-des-hyperviseurs-suppl\xe9mentaires",level:3},{value:"Commander de la ressource m\xe9moire suppl\xe9mentaire",id:"commander-de-la-ressource-m\xe9moire-suppl\xe9mentaire",level:3},{value:"Commander du stockage suppl\xe9mentaire",id:"commander-du-stockage-suppl\xe9mentaire",level:3},{value:"Etape 7 : Configurer la console Shiva en tant que datasource dans Grafana",id:"etape-7--configurer-la-console-shiva-en-tant-que-datasource-dans-grafana",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:3},{value:"Configuration",id:"configuration",level:3},{value:"R\xe9sultat",id:"r\xe9sultat",level:3}];function d(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"La qualification SecNumCloud de l'ANSSI impose une signature contractuelle entre le commanditaire (la personne qui signe le contrat de votre c\xf4t\xe9) et Cloud Temple."}),"\n",(0,r.jsx)(n.p,{children:"Le commanditaire se voit remettre, lors d'un atelier conjoint d'activation de votre organisation, le compte maitre d'acc\xe8s \xe0 la console d'administration de vos ressources Cloud.\nLors de cet atelier, nous en profitons pour r\xe9aliser ensemble les premieres \xe9tapes de prises en main et d'initialisation."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"En particulier, nous d\xe9clarons durant cet atelier les IP publiques autoris\xe9e \xe0 acc\xe9der pour votre organisation \xe0 la console Shiva."})}),"\n",(0,r.jsx)(n.p,{children:"Voici les diff\xe9rentes \xe9tapes \xe0 suivre (vous disposez du compte maitre de l'organisation) :"}),"\n",(0,r.jsx)(n.h2,{id:"etape-1--inviter-un-utilisateur-dans-votre-organisation",children:"Etape 1 : Inviter un utilisateur dans votre Organisation"}),"\n",(0,r.jsxs)(n.p,{children:["La premi\xe8re \xe9tape est de cr\xe9er un compte utilisateur par invitation : ",(0,r.jsx)(n.a,{href:"/en/docs/console/accounts#cr%C3%A9ation-dun-compte-utilisateur-dans-votre-organisation",children:"Inviter un utilisateur dans votre organisation"})]}),"\n",(0,r.jsx)(n.h2,{id:"etape-2--g\xe9rer-les-droits-dun-utilisateur",children:"Etape 2 : G\xe9rer les droits d'un utilisateur"}),"\n",(0,r.jsxs)(n.p,{children:["Il faut ensuite affecter les droits \xe0 l'utilisateur pour lui permettre d'acc\xe9der aux tenants le concernant\net de r\xe9aliser les actions qui lui seront autoris\xe9es : ",(0,r.jsx)(n.a,{href:"/en/docs/console/accounts#affectation-des-permissions-%C3%A0-un-utilisateur",children:"Affectation des droits \xe0 un utilisateur"})]}),"\n",(0,r.jsx)(n.h2,{id:"etape-4--mettre-en-\u0153uvre-une-f\xe9d\xe9ration-didentit\xe9",children:"Etape 4 : Mettre en \u0153uvre une f\xe9d\xe9ration d'identit\xe9"}),"\n",(0,r.jsxs)(n.p,{children:["Par d\xe9faut, la console Shiva vous propose une base de comptes locaux. Vous pouvez cependant utiliser ",(0,r.jsx)(n.a,{href:"/en/docs/console/organisations#mecanismes-dauthentification",children:"un r\xe9f\xe9rentiel d'authentification externe."}),"\nCi-apr\xe8s deux exemples utilisant les technologies Microsoft."]}),"\n",(0,r.jsxs)(n.h3,{id:"exemple-1--configurer-un-fournisseur-microsoft-adfs-active-directory-federation-services",children:["Exemple 1 : Configurer un fournisseur ",(0,r.jsx)(n.strong,{children:"Microsoft ADFS"})," (Active Directory Federation Services)"]}),"\n",(0,r.jsxs)(n.p,{children:["La configuration d'un fournisseur ADFS via un service AAD (Azure Active Directory) externe permet de faciliter l'authentification des utilisateurs Microsoft Onpremise.\n",(0,r.jsx)(n.a,{href:"/en/docs/console/iam/sso_adfs",children:"Le guide est disponible ici."})]}),"\n",(0,r.jsxs)(n.h3,{id:"exemple-2--configurer-un-fournisseur-microsoft-entraid-azure-active-directory",children:["Exemple 2 : Configurer un fournisseur ",(0,r.jsx)(n.strong,{children:"Microsoft EntraID"})," (Azure Active Directory)"]}),"\n",(0,r.jsxs)(n.p,{children:["La configuration du SSO (Single Sign-On) via un service Microsoft EntraID permet de faciliter l'authentification des utilisateurs en environnement Office 365.\n",(0,r.jsx)(n.a,{href:"/en/docs/console/iam/sso_aad",children:"Le guide est disponible ici."})]}),"\n",(0,r.jsx)(n.h2,{id:"etape-4--utiliser-un-second-facteur-dauthentification-2fa",children:"Etape 4 : Utiliser un second facteur d'authentification (2FA)"}),"\n",(0,r.jsxs)(n.p,{children:["La mise en place d'un double facteur d'authentification est obligatoire. Dans le cas des comptes locaux, il est possible de g\xe8rer ce deuxi\xe8me facteur d'authentification via la console. Lorsque vous utilisez un r\xe9f\xe9rentiel d'authentification externe, ",(0,r.jsx)(n.strong,{children:"le second facteur est g\xe9r\xe9 par ce r\xe9f\xe9rentiel"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Le pilotage se fait depuis votre profil. Les administrateurs peuvent faire cette action sur l'ensemble des utilisateurs de l'",(0,r.jsx)(n.a,{href:"/en/docs/console/organisations",children:"Organisation"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"etape-5--cr\xe9er-et-g\xe9rer-les-cl\xe9s-api",children:"Etape 5 : Cr\xe9er et g\xe9rer les cl\xe9s API"}),"\n",(0,r.jsxs)(n.p,{children:["La cr\xe9ation d'une cl\xe9 API, aussi appel\xe9e ",(0,r.jsx)(n.strong,{children:"Personal Acces Token"})," (PAT), se fait depuis votre profil. Cliquez en haut \xe0 droite sur votre profil et choisissez ",(0,r.jsx)(n.strong,{children:"'profil'"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(3582).Z+"",width:"3098",height:"874"})}),"\n",(0,r.jsxs)(n.p,{children:["Pour g\xe9n\xe9rer une nouvelle clef API, cliquer sur ",(0,r.jsx)(n.strong,{children:"'Nouveau access token personnel'"})]}),"\n",(0,r.jsx)(n.p,{children:"Vous pouvez g\xe9n\xe9rer plusieurs cl\xe9s. Chaque cl\xe9 est li\xe9e au compte de la personne qui a fait la cr\xe9ation. Vous devez d\xe9finir un nom, une date d'expiration et les droits sp\xe9cifiques pour chaque cl\xe9 :"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(6242).Z+"",width:"1384",height:"1828"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Nota : il n'est pas possible de donner plus de droit que ceux positionn\xe9s sur le compte utilis\xe9 pour cr\xe9er la cl\xe9."})}),"\n",(0,r.jsx)(n.h2,{id:"etape-6--commander-des-ressources-compl\xe9mentaires-via-linterface-web",children:"Etape 6 : Commander des ressources compl\xe9mentaires via l'interface web"}),"\n",(0,r.jsx)(n.h3,{id:"commander-des-hyperviseurs-suppl\xe9mentaires",children:"Commander des hyperviseurs suppl\xe9mentaires"}),"\n",(0,r.jsxs)(n.p,{children:["Pour ajouter des Hyperviseurs \xe0 un cluster, il suffit de se rendre sur la configuration du cluster et de cliquer\nsur le bouton ",(0,r.jsx)(n.strong,{children:"'Ajouter un host'"})," qui se situe dans le tableau avec la liste des hosts, en haut \xe0 droite."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"nota"})," :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:[(0,r.jsx)(n.strong,{children:"La configuration d'un cluster doit \xeatre homog\xe8ne"}),". Ainsi, il n'est pas permis de mixer les types d'hyperviseur au sein d'un cluster. Toutes les lames doivent \xeatre de m\xeame type."]})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:["Les droits ",(0,r.jsx)(n.strong,{children:"'order'"})," ainsi que ",(0,r.jsx)(n.strong,{children:"'compute'"})," sont n\xe9cessaires au compte pour mener cette action."]})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(1713).Z+"",width:"3600",height:"2076"})}),"\n",(0,r.jsx)(n.h3,{id:"commander-de-la-ressource-m\xe9moire-suppl\xe9mentaire",children:"Commander de la ressource m\xe9moire suppl\xe9mentaire"}),"\n",(0,r.jsxs)(n.p,{children:["Pour ajouter de la m\xe9moire vive sur un cluster, il suffit de se rendre sur la configuration du cluster et de cliquer sur ",(0,r.jsx)(n.strong,{children:"'Modifier la m\xe9moire'"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"nota"})," :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:[(0,r.jsx)(n.strong,{children:"Les machines sont livr\xe9es avec la totalit\xe9 de la m\xe9moire physique"}),". Le d\xe9bridage de la ressource m\xe9moire n'est qu'une activation logicielle au niveau d'un cluster."]})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.em,{children:"Il n'est pas possible de modifier la quantit\xe9 de m\xe9moire physique d'un type de lame. Bien tenir compte de la capacit\xe9 maximale d'une lame lors de la cr\xe9ation d'un cluster."})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:["Les droits ",(0,r.jsx)(n.strong,{children:"'order'"})," ainsi que ",(0,r.jsx)(n.strong,{children:"'compute'"})," sont n\xe9cessaires au compte pour mener cette action."]})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(5718).Z+"",width:"3600",height:"2076"})}),"\n",(0,r.jsx)(n.h3,{id:"commander-du-stockage-suppl\xe9mentaire",children:"Commander du stockage suppl\xe9mentaire"}),"\n",(0,r.jsxs)(n.p,{children:["Le stockage Cloud temple en mode bloc est bas\xe9 sur des LUNs d\xe9di\xe9es et chiffr\xe9es. Pour ajouter un datastore suppl\xe9mentaire dans votre cluster de stockage SDRS, il suffit de se rendre sur la\nconfiguration du cluster de stockage et de cliquer sur le bouton ",(0,r.jsx)(n.strong,{children:"'Ajouter un datastore'"})," qui se situe dans le tableau\navec la liste des datastores."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(6106).Z+"",width:"3600",height:"2076"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"nota"})," :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:["La taille de la plus petite LUN activable sur un cluster est de ",(0,r.jsx)(n.strong,{children:"500 Gio"}),"."]})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:["Les performances d'un datastore vont de 500 iops/Tio en moyenne jusqu'\xe0 15000 iops/Tio en moyenne. ",(0,r.jsx)(n.strong,{children:"C'est un bridage logiciel r\xe9alis\xe9 au niveau des contr\xf4leurs de stockage"}),"."]})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"La comptabilit\xe9 du volume de disque consomm\xe9 par votre organisation est la somme de toutes les LUNs sur l'ensemble des AZs utilis\xe9es"}),"."]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:["Les droits ",(0,r.jsx)(n.strong,{children:"'order'"})," ainsi que ",(0,r.jsx)(n.strong,{children:"'compute'"})," sont n\xe9cessaires au compte pour mener cette action."]})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"etape-7--configurer-la-console-shiva-en-tant-que-datasource-dans-grafana",children:"Etape 7 : Configurer la console Shiva en tant que datasource dans Grafana"}),"\n",(0,r.jsx)(n.p,{children:"L'objectif est d'enrichir l'observabilit\xe9 de votre infrastructure Cloud via la m\xe9trologie Cloud Temple."}),"\n",(0,r.jsx)(n.h3,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Une instance Grafana ayant acc\xe8s aux API de la Console Shiva."}),"\n",(0,r.jsxs)(n.li,{children:["Un acc\xe8s d'administration sur l'instance Grafana afin de pouvoir configurer les ",(0,r.jsx)(n.em,{children:"datasources"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Un personal access token poss\xe9dant au moins le droit ",(0,r.jsx)(n.code,{children:"metrics_read"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Dans la ",(0,r.jsx)(n.strong,{children:"configuration"})," de Grafana aller dans l'onglet \"",(0,r.jsx)(n.strong,{children:"datasources"}),'" puis cliquer sur "',(0,r.jsx)(n.strong,{children:"Add datasource"}),'".']}),"\n",(0,r.jsxs)(n.p,{children:["Dans l'URL, fournir l'",(0,r.jsx)(n.strong,{children:"URL de l'API Shiva Metrics"}),' sans la version et finissant par "',(0,r.jsx)(n.strong,{children:"/prometheus"}),'"\n(exemple : ',(0,r.jsx)(n.a,{href:"https://shiva.cloud-temple.com/api/metric/prometheus",children:"https://shiva.cloud-temple.com/api/metric/prometheus"}),")"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(265).Z+"",width:"1120",height:"324"})}),"\n",(0,r.jsxs)(n.p,{children:["Dans l'",(0,r.jsx)(n.strong,{children:"authentification"}),", activer l'option ",(0,r.jsx)(n.strong,{children:"Basic Auth"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(647).Z+"",width:"1100",height:"400"})}),"\n",(0,r.jsxs)(n.p,{children:['Dans la partie "',(0,r.jsx)(n.strong,{children:"Basic Auth Details"}),'", configurer le ',(0,r.jsx)(n.strong,{children:"username"})," et ",(0,r.jsx)(n.strong,{children:"password"})," en utilisant\nrespectivement les ",(0,r.jsx)(n.strong,{children:"id"})," et ",(0,r.jsx)(n.strong,{children:"secret"})," d'un ",(0,r.jsx)(n.strong,{children:"PAT"})," ayant le droit ",(0,r.jsx)(n.strong,{children:"metrics_read"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(4424).Z+"",width:"840",height:"236"})}),"\n",(0,r.jsxs)(n.p,{children:['Dans la partie "',(0,r.jsx)(n.strong,{children:"Alerting"}),'", configurer la propri\xe9t\xe9 ',(0,r.jsx)(n.strong,{children:"HTTP Method"})," en ",(0,r.jsx)(n.strong,{children:"GET"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(4714).Z+"",width:"928",height:"544"})}),"\n",(0,r.jsx)(n.h3,{id:"r\xe9sultat",children:"R\xe9sultat"}),"\n",(0,r.jsxs)(n.p,{children:['Afin de confirmer que la configuration est correcte et fonctionnelle, appuyez sur le bouton "',(0,r.jsx)(n.strong,{children:"Save & test"}),'".']}),"\n",(0,r.jsx)(n.p,{children:"Vous devriez voir s'afficher un bandeau vous informant que la configuration a r\xe9ussie."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(2602).Z+"",width:"928",height:"430"})}),"\n",(0,r.jsxs)(n.p,{children:["Vous trouverez tout un ensemble d'exemple de configuration pour Grafana ici : ",(0,r.jsx)(n.a,{href:"https://github.com/Cloud-Temple/console-grafana-iaas",children:"https://github.com/Cloud-Temple/console-grafana-iaas"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(825).Z+"",width:"1802",height:"1088"})})]})}function u(e={}){let{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},825:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/grafana_dashboards_001-7d52f46eb09176e7e0f203f70d8546a8.png"},3582:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/shiva_onboard_002-a6ecb2e3617cd3a4a76064e2ae032a97.png"},6242:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/shiva_onboard_006-8db0080f750dda6ba7721378c27cb242.png"},1713:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/shiva_orders_iaas_cpool_esx-4b8876535c33598bd849a1681bf13377.png"},5718:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/shiva_orders_iaas_cpool_memory-c4150110848fc3b0e85fe7c1eec6e180.png"},6106:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/shiva_orders_iaas_spool_ds-7773c1762cd0820faea5da4189acabf7.png"},4714:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/grafana_datasource_alerting-be334997b56077cc85bd758d32eb1801.png"},647:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/grafana_datasource_auth-d3636882b4e8fd0fccfbbd9260a95cdf.png"},4424:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/grafana_datasource_basic_auth_details-d2a4cb2dae17c0df9cf125688f17c0ce.png"},265:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/grafana_datasource_http-798b694e8642cac9615a09cd0d9d847e.png"},2602:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/grafana_datasource_working-45b6b4d22ff531973a5d6bb3894005e0.png"},65:function(e,n,s){s.d(n,{Z:function(){return o},a:function(){return a}});var i=s(7294);let r={},t=i.createContext(r);function a(e){let n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);