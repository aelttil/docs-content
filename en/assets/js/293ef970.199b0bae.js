"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["7781"],{1486:function(e,n,s){s.r(n),s.d(n,{metadata:()=>i,contentTitle:()=>a,default:()=>u,assets:()=>c,toc:()=>o,frontMatter:()=>t});var i=JSON.parse('{"id":"network/quickstart_network","title":"D\xe9ployer un firewall opensource pfSense","description":"Ce guide va vous aider \xe0 d\xe9ployer votre firewall opensource pfSense dans le Cloud de Confiance en seulement quelques minutes.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/network/quickstart_network.md","sourceDirName":"network","slug":"/network/quickstart_network","permalink":"/en/docs/network/quickstart_network","draft":false,"unlisted":false,"editUrl":"https://github.com/aelttil/docs-content/docs/network/quickstart_network.md","tags":[],"version":"current","frontMatter":{"title":"D\xe9ployer un firewall opensource pfSense"},"sidebar":"docSidebar","previous":{"title":"R\xe9seaux Priv\xe9s","permalink":"/en/docs/network/private_network"},"next":{"title":"Concepts","permalink":"/en/docs/paas/concepts"}}'),r=s("5893"),l=s("65");let t={title:"D\xe9ployer un firewall opensource pfSense"},a=void 0,c={},o=[{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"D\xe9ployer un firewall opensource pfSense",id:"d\xe9ployer-un-firewall-opensource-pfsense",level:2},{value:"Demander une livraison d&#39;acc\xe8s internet",id:"demander-une-livraison-dacc\xe8s-internet",level:3},{value:"Installation et configuration r\xe9seau des interfaces",id:"installation-et-configuration-r\xe9seau-des-interfaces",level:3},{value:"Acc\xe8s au Firewall",id:"acc\xe8s-au-firewall",level:3},{value:"Configuration du firewall",id:"configuration-du-firewall",level:3},{value:"Configuration des neighbors BGP",id:"configuration-des-neighbors-bgp",level:3},{value:"V\xe9rification de l&#39;\xe9tat de la session bgp avec les neighbors",id:"v\xe9rification-de-l\xe9tat-de-la-session-bgp-avec-les-neighbors",level:3},{value:"Annoncer son pr\xe9fixe public",id:"annoncer-son-pr\xe9fixe-public",level:3}];function d(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Ce guide va vous aider \xe0 d\xe9ployer votre ",(0,r.jsx)(n.strong,{children:"firewall opensource pfSense"})," dans le Cloud de Confiance en seulement quelques minutes."]}),"\n",(0,r.jsx)(n.h2,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,r.jsx)(n.p,{children:"Les pr\xe9requis \xe0 ce guide sont les suivants :"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Avoir souscrit \xe0 l'offre Cloud Temple : vous devez disposer de votre organisation, de votre tenant et de vos acc\xe8s,"}),"\n",(0,r.jsx)(n.li,{children:"Avoir les droits sur le module compute."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Ce document d\xe9crit les \xe9tapes \xe0 suivre pour d\xe9ployer un firewall virtuel pfSense."}),"\n",(0,r.jsx)(n.h2,{id:"d\xe9ployer-un-firewall-opensource-pfsense",children:"D\xe9ployer un firewall opensource pfSense"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://www.pfsense.org",children:"pfSense"})," est un projet open source bas\xe9 sur freeBSD permettant de mettre en place un firewall virtuel."]}),"\n",(0,r.jsx)(n.p,{children:"Un firewall pfSense s'administre via une interface web, il faut donc disposer d'une deuxi\xe8me machine\navec une interface graphique ayant une adresse IP dans le m\xeame r\xe9seau LAN que le firewall pour pouvoir le configurer."}),"\n",(0,r.jsx)(n.p,{children:"Nous aurons besoin d'un ensemble de deux VM :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"la premi\xe8re sera la machine sur laquelle nous allons d\xe9ployer le firewall"}),"\n",(0,r.jsx)(n.li,{children:"la deuxi\xe8me sera la machine \xe0 partir de laquelle nous allons administrer le firewall."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"demander-une-livraison-dacc\xe8s-internet",children:"Demander une livraison d'acc\xe8s internet"}),"\n",(0,r.jsxs)(n.p,{children:["La premi\xe8re \xe9tape consiste \xe0 r\xe9cup\xe9rer ",(0,r.jsx)(n.a,{href:"https://docs.cloud-temple.com/network/internet/#gestion-de-vos-connectivites-internet",children:"les informations d'acc\xe8s internet ici "}),". Vous devez avoir les informations suivantes :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"prefix public"}),"\n",(0,r.jsx)(n.li,{children:"prefix interconnection"}),"\n",(0,r.jsx)(n.li,{children:"any-cast gateway"}),"\n",(0,r.jsx)(n.li,{children:"plage IP"}),"\n",(0,r.jsx)(n.li,{children:"local AS"}),"\n",(0,r.jsx)(n.li,{children:"AS de Cloud Temple"}),"\n",(0,r.jsx)(n.li,{children:"keepalive timers et le hold-time timer"}),"\n",(0,r.jsx)(n.li,{children:"les adresses des routes servers"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"installation-et-configuration-r\xe9seau-des-interfaces",children:"Installation et configuration r\xe9seau des interfaces"}),"\n",(0,r.jsx)(n.p,{children:"Vous pouvez ensuite d\xe9ployer votre vm pfSense :"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Installation du firewall"})," depuis le template pfSense dans shiva :","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/en/docs/iaas/quickstart_iaas_template#d%C3%A9ployer-une-machine-virtuelle-depuis-un-template",children:"(D\xe9ployer via la console)"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/en/docs/iaas/quickstart_iaas#d%C3%A9ployer-une-machine-virtuelle-via-terraform",children:"(D\xe9ployer via Terraform)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration des interfaces LAN et WAN"})," du firewall : l'interface WAN doit \xeatre dans votre vLAN internet, son IP sera prise dans la plage IP qui vous a \xe9t\xe9 communiqu\xe9e par le CDS ainsi que la default GW."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Installation de la deuxi\xe8me machine"})," de management."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configuration de l'interface"})," de la VM de management : cette machine doit \xeatre dans le m\xeame r\xe9seau que celui dans lequel l'interface LAN du firewall a \xe9t\xe9 configur\xe9e."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"acc\xe8s-au-firewall",children:"Acc\xe8s au Firewall"}),"\n",(0,r.jsx)(n.p,{children:"Une fois que les deux VM sont bien install\xe9es, la deuxi\xe8me \xe9tape consiste \xe0 acc\xe9der au firewall afin de commencer sa configuration."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"acc\xe9der \xe0 l'interface web du firewall depuis la vm de management :"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(5170).Z+"",width:"807",height:"535"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["login par d\xe9faut :","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["username : ",(0,r.jsx)(n.em,{children:"admin"})]}),"\n",(0,r.jsxs)(n.li,{children:["password : ",(0,r.jsx)(n.em,{children:"pfsense"})," (pensez \xe0 changer le mot de passe par default)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(9526).Z+"",width:"807",height:"610"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-du-firewall",children:"Configuration du firewall"}),"\n",(0,r.jsx)(n.p,{children:"Cette \xe9tape consiste \xe0 configurer les neighbors BGP du FW."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["dans un premier temps, pensez \xe0 autoriser le Flux BGP en TCP 179 dans ",(0,r.jsx)(n.strong,{children:"'Firewall > Rules'"})," :"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(8799).Z+"",width:"802",height:"495"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Allez dans ",(0,r.jsx)(n.strong,{children:"'services > FRR BGP'"})," pour commencer la configuration de votre session BGP :"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(7584).Z+"",width:"802",height:"495"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cochez les deux premi\xe8res cases et indiquez le num\xe9ro de votre local AS et les times tel qui vous ont \xe9t\xe9 communiqu\xe9s par le CDS."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(4770).Z+"",width:"802",height:"495"})}),"\n",(0,r.jsx)(n.h3,{id:"configuration-des-neighbors-bgp",children:"Configuration des neighbors BGP"}),"\n",(0,r.jsx)(n.p,{children:"Dans Neighbors, cliquez sur +Add pour commencer \xe0 cr\xe9er vos voisins BPG."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Pour chaque neighbor : renseignez son IP adresse dans ",(0,r.jsx)(n.strong,{children:"'General Options > Name/address'"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(7041).Z+"",width:"802",height:"495"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"renseignez le remote AS (correspondant au num\xe9ro d'AS de cloud temple) dans basic options comme suit :"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(9382).Z+"",width:"780",height:"482"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"et enfin dans Advanced option, faites ceci :"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(106).Z+"",width:"759",height:"325"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["cochez la case qui d\xe9finit le type de votre neighbor. Dans notre cas, c'est ",(0,r.jsx)(n.code,{children:"un route"})," serveur :"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(5794).Z+"",width:"675",height:"148"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\xe0 la fin, n'oubliez pas de sauvegarder vos modifications en cliquant sur ",(0,r.jsx)(n.strong,{children:"'save'"})," :"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(6018).Z+"",width:"802",height:"495"})}),"\n",(0,r.jsx)(n.h3,{id:"v\xe9rification-de-l\xe9tat-de-la-session-bgp-avec-les-neighbors",children:"V\xe9rification de l'\xe9tat de la session bgp avec les neighbors"}),"\n",(0,r.jsx)(n.p,{children:"Dans Status, vous pouvez voir l'\xe9tat de la session BGP que vous venez de configurer"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(5979).Z+"",width:"759",height:"325"})}),"\n",(0,r.jsxs)(n.p,{children:["Veillez \xe0 ce que le ",(0,r.jsx)(n.strong,{children:"BGP State"})," soit \xe0 ",(0,r.jsx)(n.strong,{children:"established"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"annoncer-son-pr\xe9fixe-public",children:"Annoncer son pr\xe9fixe public"}),"\n",(0,r.jsx)(n.p,{children:"Afin d'annoncer son pr\xe9fixe public, vous pouvez cr\xe9er des routes en /32 et faire la redistribution en static :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["dans ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"System > Routing > Static Routes"})})," : cr\xe9er vos routes static en /32 en mettant la Gateway \xe0 Null4- 127.0.0.1"]}),"\n",(0,r.jsxs)(n.li,{children:["dans ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.em,{children:"Services > FRR package > BGP > Network Distribution"})})," : activez la ",(0,r.jsx)(n.code,{children:"redistribution"})," en local en choisissant IPV4 dans ",(0,r.jsx)(n.code,{children:"Reditribute"})," FRR static routes."]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},9382:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/bgp_basic_options-80558badfc3f167132b25be7a4826d7d.png"},106:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/ebgp_conf-67c202063fdd1609ac952e5472bbc4c5.png"},6018:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/neighbors_overview-d487bde271cb9c977c8f9f15dcaae629.png"},8799:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/pfsense_bgp_rule-22cbf6912b45f4dd7a69d0e240e9fb9f.png"},5979:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/pfsense_bgp_status-18e65a2517fdfadbc094c0c3e98ddb7d.png"},7584:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/pfsense_frr_package-7baca28521ee2d7c4391f80a00c41e58.png"},4770:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/pfsense_general_conf-9503cd34d54aee50274ca6b3eeea42db.png"},9526:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/pfsense_home_page-d5292c575c52e2a7e62d17744f11884c.png"},7041:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/pfsense_neighbor_conf-8ac3cd73d0fade894b242ede5288ddde.png"},5170:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/pfsense_webui-23ea605c2901ac09859fbf6ec03cd90c.png"},5794:function(e,n,s){s.d(n,{Z:function(){return i}});let i=s.p+"assets/images/route_server_neighbor-9df1ca82aa2aed1f79fc5da8e891fc33.png"},65:function(e,n,s){s.d(n,{Z:function(){return a},a:function(){return t}});var i=s(7294);let r={},l=i.createContext(r);function t(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);