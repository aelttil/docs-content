"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["4075"],{8663:function(e,s,i){i.r(s),i.d(s,{metadata:()=>n,contentTitle:()=>a,default:()=>u,assets:()=>d,toc:()=>c,frontMatter:()=>l});var n=JSON.parse('{"id":"iaas/storage","title":"Stockage","description":"G\xe9n\xe9ralit\xe9 sur le stockage","source":"@site/docs/iaas/storage.md","sourceDirName":"iaas","slug":"/iaas/storage","permalink":"/docs/iaas/storage","draft":false,"unlisted":false,"editUrl":"https://github.com/aelttil/docs-content/docs/iaas/storage.md","tags":[],"version":"current","frontMatter":{"title":"Stockage"},"sidebar":"docSidebar","previous":{"title":"D\xe9ploiement depuis un template","permalink":"/docs/iaas/quickstart_iaas_template"},"next":{"title":"Comment faire pour ?","permalink":"/docs/iaas/tutorials_iaas"}}'),r=i("5893"),t=i("65");let l={title:"Stockage"},a=void 0,d={},c=[{value:"G\xe9n\xe9ralit\xe9 sur le stockage",id:"g\xe9n\xe9ralit\xe9-sur-le-stockage",level:2},{value:"Stockage en mode bloc",id:"stockage-en-mode-bloc",level:2},{value:"G\xe9n\xe9ralit\xe9",id:"g\xe9n\xe9ralit\xe9",level:3},{value:"Utilisation dans le cadre de l&#39;offre de calcul vmware",id:"utilisation-dans-le-cadre-de-loffre-de-calcul-vmware",level:3},{value:"Stockage en mode backup",id:"stockage-en-mode-backup",level:2},{value:"Stockage objet",id:"stockage-objet",level:2},{value:"R\xe9plication du stockage en mode bloc",id:"r\xe9plication-du-stockage-en-mode-bloc",level:2},{value:"Principes",id:"principes",level:3},{value:"R\xe9plication asynchrone",id:"r\xe9plication-asynchrone",level:3},{value:"R\xe9plication synchrone",id:"r\xe9plication-synchrone",level:3},{value:"R\xe9plication asynchrone de vos machines virtuelles en environnement VMware",id:"r\xe9plication-asynchrone-de-vos-machines-virtuelles-en-environnement-vmware",level:2}];function o(e){let s={a:"a",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"g\xe9n\xe9ralit\xe9-sur-le-stockage",children:"G\xe9n\xe9ralit\xe9 sur le stockage"}),"\n",(0,r.jsxs)(s.p,{children:["Cloud Temple propose plusieurs classes de stockage bas\xe9es sur la technologie ",(0,r.jsx)(s.a,{href:"https://www.ibm.com/flashsystem/",children:"IBM FlashSystem"}),"\net ",(0,r.jsx)(s.a,{href:"https://www.ibm.com/products/san-volume-controller",children:"IBM SVC"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["La technologie ",(0,r.jsx)(s.strong,{children:"IBM SVC"})," permet de d\xe9livrer le niveau de performance requis pour les environnements de nos clients gr\xe2ce \xe0 la grande\nquantit\xe9 de cache m\xe9moire embarqu\xe9e dans les contr\xf4leurs et \xe0 la possibilit\xe9 de r\xe9partir l\u2019ensemble des IOPS\nd\u2019un serveur sur plusieurs SAN."]}),"\n",(0,r.jsx)(s.p,{children:"Elle est aussi utilis\xe9e pour permettre la r\xe9plication de vos LUNs de stockage en mode bloc entre\nles zones de disponibilit\xe9 ou faciliter les interventions sur les baies de stockages."}),"\n",(0,r.jsx)(s.h2,{id:"stockage-en-mode-bloc",children:"Stockage en mode bloc"}),"\n",(0,r.jsx)(s.h3,{id:"g\xe9n\xe9ralit\xe9",children:"G\xe9n\xe9ralit\xe9"}),"\n",(0,r.jsxs)(s.p,{children:["Le stockage est principalement du stockage de type FLASH NVME d\xe9di\xe9 aux charges de travail professionnelles.\nLes disques sont utilis\xe9s par les baies de stockage en ",(0,r.jsx)(s.a,{href:"https://www.ibm.com/docs/en/flashsystem-5x00/8.6.x?topic=configurations-distributed-raid-array-properties",children:(0,r.jsx)(s.strong,{children:"'Distributed Raid 6'"})}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Le classe de stockage ",(0,r.jsx)(s.strong,{children:"'Mass Storage'"})," propose des disques m\xe9caniques pour les besoins d'archivages\ndans un contexte d'efficience \xe9conomique. Plusieurs niveaux de performances sont disponibles :"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"R\xe9f\xe9rence"}),(0,r.jsx)(s.th,{children:"Unit\xe9"}),(0,r.jsx)(s.th,{children:"SKU"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"FLASH - Essentiel - 500 IOPS/To"}),(0,r.jsx)(s.td,{children:"1 Gio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:bloc:live",":v1"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"FLASH - Standard - 1500 IOPS/To"}),(0,r.jsx)(s.td,{children:"1 Gio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:bloc:medium",":v1"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"FLASH - Premium - 3000 IOPS/To"}),(0,r.jsx)(s.td,{children:"1 Gio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:bloc:premium",":v1"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"FLASH - Enterprise - 7500 IOPS/To"}),(0,r.jsx)(s.td,{children:"1 Gio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:bloc:enterprise",":v1"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"FLASH - Ultra - 15000 IOPS/To"}),(0,r.jsx)(s.td,{children:"1 Gio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:bloc:ultra",":v1"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"MASS STORAGE - Archivage"}),(0,r.jsx)(s.td,{children:"1 Tio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:bloc:mass",":v1"]})]})]})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.em,{children:[(0,r.jsx)(s.strong,{children:"Nota"})," :"]})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"La disponibilit\xe9 du stockage est de 99.99% mesur\xe9 mensuellement, plage de maintenance incluse,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"Il n'y a pas de restriction ou de quota sur la lecture ou l'\xe9criture,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"Il n'y a pas de facturation \xe0 l'IOPS,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.em,{children:["Il n'y a pas d'engagement de performance sur la classe ",(0,r.jsx)(s.strong,{children:"'Mass Storage'"}),","]})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"La taille minimale d'une LUN de stockage est de 500Gio,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"Lors de l'usage d'un m\xe9canisme de r\xe9plication de stockage, les performances doivent \xeatre identiques sur les deux zones de disponibilit\xe9,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"Aucun m\xe9canisme d'optimisation \"intelligent\" de type compression ou d\xe9duplication n'est mis en \u0153uvre : quand vous r\xe9servez 10Tio de stockage, vous avez physiquement 10Tio utile de stockage mis en \u0153uvre sur les machines IBM."})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"Les LUNs de stockage sont d\xe9di\xe9s \xe0 l'environnement client."})}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"utilisation-dans-le-cadre-de-loffre-de-calcul-vmware",children:"Utilisation dans le cadre de l'offre de calcul vmware"}),"\n",(0,r.jsxs)(s.p,{children:["Dans le cadre de l'utilisation du stockage en mode bloc sous forme de datastore dans l'offre de calcul VMware de Cloud Temple, ",(0,r.jsx)(s.strong,{children:"vous devez prendre en compte plusieurs consid\xe9rations importantes"})," :"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Fichier de swap (.VSWP) lors du d\xe9marrage des machines virtuelles"})," : Lorsqu'une machine virtuelle d\xe9marre, elle cr\xe9e un fichier .VSWP de la taille de sa m\xe9moire sur le disque. Par cons\xe9quent, pour pouvoir d\xe9marrer vos machines virtuelles, vous devez toujours disposer dans votre datastore d'un espace libre \xe9quivalent \xe0 la somme des tailles m\xe9moires de vos machines virtuelles. Par exemple, si votre datastore dispose de 1 Tio de stockage bloc et que vous souhaitez d\xe9marrer 10 machines virtuelles de 64 Gio de m\xe9moire chacune, 640 Gio d'espace disque seront n\xe9cessaires. Sans cet espace, le d\xe9marrage des machines sera limit\xe9 par la capacit\xe9 disponible pour cr\xe9er les fichiers de swap."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Espace libre pour les snapshots de sauvegarde"})," : Le service de sauvegarde utilise des clich\xe9s instantan\xe9s (snapshots). Vous devez donc toujours avoir suffisamment d'espace libre pour permettre la cr\xe9ation d'un instantan\xe9 lors de la sauvegarde d'une machine virtuelle. La taille de l'instantan\xe9 d\xe9pend du volume d'\xe9criture de la machine virtuelle et du temps n\xe9cessaire pour effectuer la sauvegarde. En r\xe8gle g\xe9n\xe9rale, il est recommand\xe9 de maintenir au moins 10 % d'espace libre pour cette op\xe9ration."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Gestion des disques dynamiques"})," : Soyez prudent avec l'utilisation des disques dynamiques. Si vous ne ma\xeetrisez pas leur croissance, un manque d'espace physique peut entra\xeener un gel (freeze) de la machine virtuelle dans le meilleur des cas, ou un plantage avec corruption dans le pire des cas. Il est crucial de surveiller attentivement l'espace disponible sur vos datastores lorsque vous utilisez ce type de disque."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Une gestion proactive de l'espace disque est essentielle pour assurer le bon fonctionnement de vos machines virtuelles et la fiabilit\xe9 des sauvegardes. Assurez-vous de toujours disposer de l'espace n\xe9cessaire pour les fichiers de swap, les snapshots et la croissance des disques dynamiques."}),"\n",(0,r.jsx)(s.h2,{id:"stockage-en-mode-backup",children:"Stockage en mode backup"}),"\n",(0,r.jsxs)(s.p,{children:["Le stockage d\xe9di\xe9 \xe0 la sauvegarde de vos machines virtuelles est auto-provisionn\xe9 par la plateforme ",(0,r.jsx)(s.a,{href:"/docs/iaas/backup",children:"IBM Spectrum Protect Plus"})," dans la limite du quota command\xe9."]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"R\xe9f\xe9rence"}),(0,r.jsx)(s.th,{children:"Unit\xe9"}),(0,r.jsx)(s.th,{children:"SKU"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"MASS STORAGE - Archivage"}),(0,r.jsx)(s.td,{children:"1 Tio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:bloc:backup",":v1"]})]})})]}),"\n",(0,r.jsx)(s.h2,{id:"stockage-objet",children:"Stockage objet"}),"\n",(0,r.jsxs)(s.p,{children:["Le stockage objet Cloud Temple est bas\xe9 sur la technologie ",(0,r.jsx)(s.a,{href:"https://www.dell.com/en-us/dt/storage/ecs/",children:"DELL ECS"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"Vous trouverez la description de ce stockage dans la section PaaS : [stockage objet]."}),"\n",(0,r.jsx)(s.h2,{id:"r\xe9plication-du-stockage-en-mode-bloc",children:"R\xe9plication du stockage en mode bloc"}),"\n",(0,r.jsx)(s.h3,{id:"principes",children:"Principes"}),"\n",(0,r.jsxs)(s.p,{children:["Pour permettre la mise \u0153uvre de vos plans de reprise d'activit\xe9, lorsqu'il n'est pas possible d'\xeatre en\nsituation de continuit\xe9 d'activit\xe9 avec des m\xe9canismes applicatifs et que la r\xe9plication des machines virtuelles\nn'est pas adapt\xe9e, Cloud Temple propose des ",(0,r.jsx)(s.strong,{children:"m\xe9canismes de r\xe9plication du stockage en mode bloc entre les zones de disponibilit\xe9 d'une r\xe9gion"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["Ces m\xe9canismes de r\xe9plication sont appliqu\xe9s sur les LUNs de stockage de vos environnements, en compl\xe9ment des sauvegardes.\nLe choix de l'utilisation d'un m\xe9canisme de r\xe9plication sur un environnement ",(0,r.jsx)(s.strong,{children:"d\xe9pend de nombreux facteurs dont sa criticit\xe9, la perte de donn\xe9es tol\xe9r\xe9e ou encore la performance vis\xe9e"})," pour l'application."]}),"\n",(0,r.jsx)(s.p,{children:"Cloud Temple propose deux types de m\xe9canismes d\xe9ploy\xe9s dans une configuration actif/passif :"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["La r\xe9plication ",(0,r.jsx)(s.strong,{children:"asynchrone"})," (ou ",(0,r.jsx)(s.strong,{children:"'Global Mirror'"}),") : ",(0,r.jsxs)(s.em,{children:["La fonction ",(0,r.jsx)(s.strong,{children:"'Global Mirror'"})," fournit un processus de copie asynchrone.\nLorsqu'un h\xf4te \xe9crit sur le volume primaire, la confirmation de l'ach\xe8vement de l'E/S est re\xe7ue avant que l'op\xe9ration\nd'\xe9criture ne se termine pour la copie sur le volume secondaire. Si une op\xe9ration de basculement est initi\xe9e, l'application\ndoit r\xe9cup\xe9rer et appliquer toutes les mises \xe0 jour qui n'ont pas \xe9t\xe9 confirm\xe9es sur le volume secondaire.\nSi les op\xe9rations d'E/S sur le volume primaire sont mises en pause pendant une courte p\xe9riode,\nle volume secondaire peut devenir une correspondance exacte du volume primaire. Cette fonction est comparable \xe0 un processus\nde sauvegarde continue dans lequel les derni\xe8res mises \xe0 jour sont toujours manquantes.\nLorsque vous utilisez Global Mirror \xe0 des fins de reprise apr\xe8s sinistre, vous devez r\xe9fl\xe9chir \xe0 la mani\xe8re dont vous souhaitez g\xe9rer ces mises \xe0 jour manquantes."]})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["La r\xe9plication ",(0,r.jsx)(s.strong,{children:"synchrone"})," (ou ",(0,r.jsx)(s.strong,{children:"'Metro Mirror'"}),") : ",(0,r.jsxs)(s.em,{children:["La fonction ",(0,r.jsx)(s.strong,{children:"'Metro Mirror'"})," est un type de copie \xe0 distance qui cr\xe9e une copie synchrone\ndes donn\xe9es d'un volume primaire vers un volume secondaire. Avec des copies synchrones, les applications h\xf4tes \xe9crivent sur le volume primaire, mais ne re\xe7oivent pas de confirmation\nque l'op\xe9ration d'\xe9criture est termin\xe9e tant que les donn\xe9es ne sont pas \xe9crites sur le volume secondaire. Cela garantit que les deux volumes contiennent des donn\xe9es identiques lorsque\nl'op\xe9ration de copie est termin\xe9e. Apr\xe8s que l'op\xe9ration de copie initiale est termin\xe9e, la fonction Metro Mirror\nmaintient en permanence une copie enti\xe8rement synchronis\xe9e des donn\xe9es source sur le site cible. ",(0,r.jsx)(s.strong,{children:"Depuis le 1\xb0 janvier 2024, la fonction 'Metro Mirror' n'est plus commercialis\xe9e."})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:'On d\xe9finit alors un site dit "actif" ou "principal" et un site "passif" ou "standby".\nLe plan de reprise d\'activit\xe9 est activ\xe9 en cas de sinistre ou dans le cadre d\'une demande de test du PRA.\nLe site passif prend ensuite le relais du site actif.'}),"\n",(0,r.jsx)(s.h3,{id:"r\xe9plication-asynchrone",children:"R\xe9plication asynchrone"}),"\n",(0,r.jsx)(s.p,{children:"Lorsque vos charges de travail n\xe9cessitent des temps de reprise d'activit\xe9 courts et qu'il n'est pas acceptable\nou adapt\xe9 d'utiliser des m\xe9canismes de type r\xe9plications applicatives / r\xe9plication de machines virtuelles,\nil est possible de r\xe9pliquer une LUN de stockage SAN entre deux zones de disponibilit\xe9 d'une m\xeame r\xe9gion."}),"\n",(0,r.jsxs)(s.p,{children:["Cette offre permet d'obtenir un ",(0,r.jsx)(s.strong,{children:"RPO de 15Mn"})," et un ",(0,r.jsx)(s.strong,{children:"RTO inf\xe9rieur \xe0 4H"}),". Elle permet de repartir beaucoup plus rapidement que\nla mise en \u0153uvre d'une restauration de sauvegarde."]}),"\n",(0,r.jsxs)(s.p,{children:["Dans un volume de stockage en r\xe9plication asynchrone (",(0,r.jsx)(s.strong,{children:"Global Mirror"}),"), les contr\xf4leurs de virtualisation SAN des\ndeux zones de disponibilit\xe9 travaillent de concert pour r\xe9aliser les op\xe9rations d'\xe9critures sur les deux sites.\nLe site maitre n'attend pas l'acquittement d'\xe9criture du site esclave."]}),"\n",(0,r.jsx)(s.p,{children:"Les \xe9tapes d'une op\xe9ration d'\xe9criture sont les suivantes :"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Un hyperviseur souhaite r\xe9aliser ",(0,r.jsx)(s.strong,{children:"une op\xe9ration d\u2019\xe9criture sur un volume Global-Mirror"})," : il envoie sa requ\xeate au contr\xf4leur SAN de sa zone de disponibilit\xe9,"]}),"\n",(0,r.jsx)(s.li,{children:"Le contr\xf4leur SAN local demande au contr\xf4leur SAN de la zone distante de r\xe9aliser l\u2019op\xe9ration d\u2019\xe9criture,"}),"\n",(0,r.jsx)(s.li,{children:"le contr\xf4leur SAN local n'attend pas l'acquittement du SAN distant et r\xe9alise alors l\u2019\xe9criture localement,"}),"\n",(0,r.jsxs)(s.li,{children:["Il donne ",(0,r.jsx)(s.strong,{children:"acquittement"})," \xe0 l\u2019hyperviseur ayant \xe9mis la requ\xeate,"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Les hyperviseurs du site distant n\u2019acc\xe8dent pas directement \xe0 la LUN Global Mirror"})," : Une demande de service est n\xe9cessaire."]}),"\n"]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"SLA"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"RPO 15mn"}),(0,r.jsx)(s.td,{children:"En cas de sinistre sur le datacenter principal, la quantit\xe9 de donn\xe9es maximales perdue correspond au maximum aux 15 derni\xe8res minutes d'\xe9criture"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"RTO < 4H"}),(0,r.jsx)(s.td,{children:"En cas de sinistre sur le datacenter principal, la reprise d'activit\xe9 est garantie sous 4 heures selon la complexit\xe9 des environnements."})]})]})]}),"\n",(0,r.jsxs)(s.p,{children:["En cas d\u2019activation du PRA, l\u2019\xe9quipe de Cloud Temple r\xe9alise une op\xe9ration de pr\xe9sentation de la LUN ",(0,r.jsx)(s.strong,{children:"'Global Mirror'"})," aux hyperviseurs distants pour qu\u2019ils puissent acc\xe9der \xe0 la donn\xe9e. La mise en place de cette solution n\xe9cessite donc d'avoir r\xe9serv\xe9 sur le site 'standby' de la ressource de calcul et de la RAM pour reprendre l'activit\xe9 en cas de sinistre."]}),"\n",(0,r.jsx)(s.p,{children:"L'usage de cette technologie n\xe9cessite \xe9galement le doublement de l'espace disque : il est n\xe9cessaire d'avoir exactement le m\xeame espace sur le site distant que sur le site local."}),"\n",(0,r.jsxs)(s.p,{children:["L'usage de ce m\xe9canisme peut impacter la performance de l'application \xe0 hauteur de 10 %. ",(0,r.jsx)(s.strong,{children:"Seules les classes de stockage 500 Iops/To, 1500 Iops/To et 3000 Iops/TO sont compatibles."})]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"R\xe9f\xe9rence"}),(0,r.jsx)(s.th,{children:"Unit\xe9"}),(0,r.jsx)(s.th,{children:"SKU"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"STOCKAGE - Global Replication SAN"}),(0,r.jsx)(s.td,{children:"1 Tio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:licence:globalmirror",":v1"]})]})})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.em,{children:(0,r.jsx)(s.strong,{children:"Nota"})})," :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"L'offre \xe9tant asynchrone, il est possible lors d'un sinistre que certaines op\xe9rations disques n'est pas \xe9t\xe9 \xe9crite sur le site distant. Il peut donc y avoir un risque sur la coh\xe9rence des donn\xe9es, a mitig\xe9 dans l'analyse de risque du plan de reprise d'activit\xe9."})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"La r\xe9plication du stockage en mode bloc se fait de fa\xe7on masqu\xe9e pour les machines virtuelles et les applications,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"\xc0 ce titre, il est important de privil\xe9gier les sc\xe9narios de r\xe9plication applicative ou \xe9ventuellement de r\xe9plication de machine virtuelle,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"Le calcul et la m\xe9moire, sur le site de reprise, peuvent \xeatre diminu\xe9s pour optimiser les co\xfbts si une situation d\xe9grad\xe9e est acceptable pour le m\xe9tier lors de l'action du plan de reprise d'activit\xe9."})}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"r\xe9plication-synchrone",children:"R\xe9plication synchrone"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Depuis 1\xb0 janvier 2024, le m\xe9canisme de r\xe9plication synchrone n'est plus commercialis\xe9"})}),"\n",(0,r.jsx)(s.p,{children:"Dans le cas d'applications \xe0 tr\xe8s fortes criticit\xe9s, ne tol\xe9rant aucune perte de donn\xe9es, il est conseill\xe9 d'adopter\nun syst\xe8me de r\xe9plication synchrone (ou metro-r\xe9plication) SAN entre les deux zones de disponibilit\xe9.\nCe plan permet d'obtenir un RPO nul (de type 'derni\xe8re \xe9criture disque')."}),"\n",(0,r.jsx)(s.p,{children:"Dans un volume de stockage en metro-r\xe9plication, les contr\xf4leurs de virtualisation SAN travaillent de concert pour r\xe9aliser les op\xe9rations d'\xe9criture sur les deux sites en simultan\xe9e."}),"\n",(0,r.jsx)(s.p,{children:"Les \xe9tapes d'une op\xe9ration d'\xe9criture sont les suivantes :"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Un hyperviseur souhaite r\xe9aliser une op\xe9ration d\u2019\xe9criture sur un volume Metro-Mirror : il envoie sa requ\xeate au contr\xf4leur SAN de son site."}),"\n",(0,r.jsx)(s.li,{children:"Le contr\xf4leur SAN local demande au contr\xf4leur SAN du site distant de r\xe9aliser l\u2019op\xe9ration d\u2019\xe9criture."}),"\n",(0,r.jsx)(s.li,{children:"Lorsque l\u2019\xe9criture est r\xe9alis\xe9e, le contr\xf4leur SAN distant donne acquittement."}),"\n",(0,r.jsx)(s.li,{children:"Le contr\xf4leur SAN local r\xe9alise alors l\u2019\xe9criture localement et donne acquittement \xe0 l\u2019hyperviseur ayant \xe9mis la requ\xeate."}),"\n",(0,r.jsx)(s.li,{children:"Les hyperviseurs du site distant n\u2019acc\xe8dent pas directement \xe0 la LUN Metro Mirror."}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:i(9734).Z+"",width:"1176",height:"656"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"SLA"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"RPO = derni\xe8re \xe9criture disque"}),(0,r.jsx)(s.td,{children:"En cas de sinistre sur le datacenter principal, la quantit\xe9 de donn\xe9es maximales perdue est celle de la derni\xe8re \xe9criture disque, soit un RPO proche de z\xe9ro."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"RTO < 4H"}),(0,r.jsx)(s.td,{children:"En cas de sinistre sur le datacenter principal, la reprise d'activit\xe9 est garantie sous 4 heures selon la complexit\xe9 des environnements."})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"En cas d\u2019activation du PRA, l\u2019\xe9quipe de Cloud Temple r\xe9alise une op\xe9ration de pr\xe9sentation de la LUN m\xe9tro-mirror aux hyperviseurs distants pour qu\u2019ils puissent acc\xe9der \xe0 la donn\xe9e."}),"\n",(0,r.jsx)(s.p,{children:"La mise en place de cette solution n\xe9cessite donc d'avoir r\xe9serv\xe9 sur le site standby de la ressource de calcul et de la RAM pour reprendre l'activit\xe9 en cas de sinistre.\nL'usage de cette technologie n\xe9cessite \xe9galement le doublement de l'espace disque : il est n\xe9cessaire d'avoir le m\xeame espace sur le site distant que sur le site local."}),"\n",(0,r.jsxs)(s.p,{children:["\xc0 noter que l'usage de ce m\xe9canisme peut impacter la performance de l'application \xe0 hauteur de 30 %. ",(0,r.jsx)(s.strong,{children:"Seule la classe de stockage 500 Iops/To est support\xe9e"}),"."]}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"R\xe9f\xe9rence"}),(0,r.jsx)(s.th,{children:"Unit\xe9"}),(0,r.jsx)(s.th,{children:"SKU"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"STOCKAGE - Metro Replication SAN inter-datacenter"}),(0,r.jsx)(s.td,{children:"1 Tio"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:storage:licence:metromirror",":v1"]})]})})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.em,{children:(0,r.jsx)(s.strong,{children:"Nota"})})," :"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"La r\xe9plication du stockage en mode bloc se fait de fa\xe7on masqu\xe9e pour les machines virtuelles et les applications,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"\xc0 ce titre, il est important de privil\xe9gier les sc\xe9narios de r\xe9plication applicative ou \xe9ventuellement de r\xe9plication de machine virtuelle,"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.em,{children:"Le calcul et la m\xe9moire sur le site de reprise peuvent \xeatre diminu\xe9 pour optimiser les couts\nsi une situation d\xe9grad\xe9e est acceptable pour le m\xe9tier lors de l'action du plan de reprise d'activit\xe9."})}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"r\xe9plication-asynchrone-de-vos-machines-virtuelles-en-environnement-vmware",children:"R\xe9plication asynchrone de vos machines virtuelles en environnement VMware"}),"\n",(0,r.jsx)(s.p,{children:"La r\xe9plication asynchrone de vos machines virtuelles est un m\xe9canisme qui consiste \xe0 pousser au niveau de l'hyperviseur source les op\xe9rations d'\xe9criture sur le site standby \xe0 intervalle de temps r\xe9gulier."}),"\n",(0,r.jsx)(s.p,{children:"Apr\xe8s une copie initiale \xe0 chaud de l'ensemble du stockage actif sur le site standby, seules les \xe9critures sont pouss\xe9es \xe0 intervalles r\xe9guliers sur le site en sommeil.\nCet intervalle d\xe9pend du volume d'\xe9criture (de toutes les heures \xe0 toutes les 24 heures)."}),"\n",(0,r.jsx)(s.p,{children:"La r\xe9plication des machines virtuelles s'appuie sur le m\xe9canisme de clich\xe9s instantan\xe9s de l'hyperviseur. \xc0 ce titre,\ncette solution a les m\xeames inconv\xe9nients, en particulier la sensibilit\xe9 au volume d'\xe9critures de la machine virtuelle,\nle processus de clich\xe9 instantan\xe9 \xe9tant un m\xe9canisme r\xe9cursif pour la cl\xf4ture du clich\xe9 instantan\xe9."}),"\n",(0,r.jsxs)(s.p,{children:["L'exemple typique de machine qui ne supporte pas le m\xe9canisme de r\xe9plication des machines virtuelles est un\nserveur FTP qui re\xe7oit les flux temps r\xe9els de cam\xe9ras de surveillance. ",(0,r.jsx)(s.strong,{children:"La machine passe son temps \xe0 \xe9crire et ne sera\npas capable de cl\xf4turer un clich\xe9 instantan\xe9 sans mise en pause du syst\xe8me d'exploitation pendant une p\xe9riode de temps significative\n(plusieurs dizaines de minutes)"}),". Si l'hyperviseur n'arrive pas \xe0 cl\xf4turer le clich\xe9 instantan\xe9, c'est exactement ce qu'il fera,\nsans possibilit\xe9 d'intervenir sauf \xe0 corrompre la machine virtuelle."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:i(6470).Z+"",width:"1178",height:"665"})}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"SLA"}),(0,r.jsx)(s.th,{children:"Description"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"RPO de 1H \xe0 24H"}),(0,r.jsx)(s.td,{children:"En cas de sinistre sur le datacenter principal, la quantit\xe9 de donn\xe9es maximale perdue est celle de la derni\xe8re pouss\xe9e des \xe9criture sur le site standby."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"RTO  < 15mn"}),(0,r.jsx)(s.td,{children:"Op\xe9ration de d\xe9marrage de la machine virtuelle stopp\xe9e sur le site distant"})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"En cas de besoin, ou en cas de d\xe9faut sur une machine du site principal, la machine miroir sur le site standby est activ\xe9e.\nLa reprise d'activit\xe9 n\xe9cessite d'avoir r\xe9serv\xe9 sur le site standby du calcul et de la RAM en standby. Il\nest n\xe9cessaire d'avoir le m\xeame espace de stockage sur le site passif que sur le site actif."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"R\xe9f\xe9rence"}),(0,r.jsx)(s.th,{children:"Unit\xe9"}),(0,r.jsx)(s.th,{children:"SKU"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"PRA - Replication VMware inter-AZ"}),(0,r.jsx)(s.td,{children:"1 vm"}),(0,r.jsxs)(s.td,{children:["csp:(region):iaas:vmware:licence:replication",":v1"]})]})})]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.em,{children:[(0,r.jsx)(s.strong,{children:"Nota"})," : Le calcul du RPO minimum doit \xeatre d\xe9fini en fonction du taux de changement sur la machine virtuelle."]})})]})}function u(e={}){let{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},9734:function(e,s,i){i.d(s,{Z:function(){return n}});let n=i.p+"assets/images/replication_metro-29a27753a062078f3c882a26d739f8d8.png"},6470:function(e,s,i){i.d(s,{Z:function(){return n}});let n=i.p+"assets/images/replication_vsphere-0c9d6331b68a7c0763efc2c0c394bfdc.png"},65:function(e,s,i){i.d(s,{Z:function(){return a},a:function(){return l}});var n=i(7294);let r={},t=n.createContext(r);function l(e){let s=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);